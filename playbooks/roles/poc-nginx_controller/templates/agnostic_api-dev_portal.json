{
  "metadata": {
    "name": "dev_{{ extra_app.name | lower }}",
    "displayName": "Dev Portal {{ extra_app.name }}",
    "description": "Generated by CMP"
  },
  "desiredState": {
    "ingress": {
      "gatewayRefs": [
        {
          "ref": "/services/environments/{{ var_env_prefix }}{{ extra_app.environment | lower }}/gateways/gw_dev_{{extra_app.name | lower}}"
        }
      ]
    },
    "publishedApiRefs": [
      {%- for component in extra_app.components -%}
        {
          "ref": "/services/environments/{{ var_env_prefix }}{{ extra_app.environment | lower }}/apps/app_{{ extra_app.name | lower }}.{{ extra_app.domain | lower }}/published-apis/api_{{ extra_app.name | lower }}_{{ component.name | lower}}"
        }{%- if not loop.last -%},{% endif %}
      {%- endfor -%}
    ]
  }
}